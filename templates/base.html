<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Instagram Clone</title>
    <style>
        /* 簡単なスタイリング */
        body { font-family: sans-serif; }
        nav { display: flex; gap: 1rem; margin-bottom: 2rem; align-items: center; }
        
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .grid-item {
            /* 各投稿アイテムの枠線や影（任意） */
            border: 1px solid #eee;
            border-radius: 8px;
            overflow: hidden;
            display: flex; /* 画像といいね欄を縦に並べる */
            flex-direction: column;
        }

        .grid-item img {
            width: 100%;
            height: auto;
            aspect-ratio: 1 / 1; /* 画像を正方形に */
            object-fit: cover;   /* はみ出た部分をトリミング */
        }

        .image-container {
            position: relative; /* オーバーレイの基準位置 */
        }

        /* ユーザー名を表示するオーバーレイ */
        .username-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            
            /* 文字を中央に配置 */
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;

            /* 普段は非表示 */
            opacity: 0;
            transition: opacity 0.3s ease;
            text-decoration: none;
        }

        /* ホバー時にオーバーレイを表示 */
        .image-container:hover .username-overlay {
            opacity: 1;
        }

        /* 画像の下、いいねボタンのエリア */
        .post-info {
            padding: 8px;
            display: flex;
            justify-content: flex-end; /* 右揃えにする */
            align-items: center;
            gap: 5px; /* ボタンと数字の間のスペース */
        }

        .like-button {
            font-size: 1.3rem;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <nav>
        <a href="{% url 'posts:top' %}">Top</a>
        {% if user.is_authenticated %}
            <a href="{% url 'posts:post_create' %}">New Post</a>
            <span>こんにちは, {{ user.username }} さん</span>
            <form action="{% url 'accounts:logout' %}" method="post" style="display: inline;">
                {% csrf_token %}
                <button type="submit">Logout</button>
            </form>
        {% else %}
            <a href="{% url 'accounts:login' %}">Login</a>
            <a href="{% url 'accounts:signup' %}">Sign Up</a>
        {% endif %}
    </nav>
    <main>
        {% block content %}
        {% endblock %}
    </main>

    {% block extra_js %}
    {% endblock %}
</body>
</html>